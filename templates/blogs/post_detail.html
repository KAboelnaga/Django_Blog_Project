{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="container my-5 d-block">

  <!-- Post Section -->
  {% include "blogs/post_section.html" %}

  <!-- Toolbar -->
  {% include "blogs/post_toolbar.html" %}

  <!-- Comments Section (Initially Hidden) -->
  <div id="comments-section" class="mt-2" style="display: none;">
    {% include "comments/comments_section.html" %}
  </div>

</div>

<!-- Toggle Script -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggleButton = document.getElementById("toggle-comments");
    const commentsSection = document.getElementById("comments-section");

    function showComments() {
      commentsSection.style.display = "block";
    }

    toggleButton.addEventListener("click", function () {
      commentsSection.style.display =
        commentsSection.style.display === "none" ? "block" : "none";
    });

    // âœ… Auto-open comments if ?show_comments=true is in the URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("show_comments") === "true") {
      showComments();
    }
  });
</script>
{% endblock %}
